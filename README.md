# Dash Platform User

Library for retrieving Dash Platform users and their properties.

> Note: this is an experimental library to support dapp sample investigation of Dash Platform usage - not for production use.

## Prerequisites

The library requires DashJS as an external dependency to create a connection to the platform, so you can either pass an existing instance of a DashJs client or the DasjJS Library this must be referenced BEFORE the Dash Platform User library.
In Node.js:

    const Dash = require('dash');
    const DashPlatformUser = require('dash-platform-user');

In the browser:

    <script src="https://unpkg.com/dash"></script>
    <script src="dash-platform-user.js" type="text/javascript"></script>

**Please see the examples below for sample usage**

## Browser usage

Include the `dash-platform-user-lib.js` script file available from the [releases page](https://github.com/dashmachine/dash-platform-user/releases).

## Nodejs usage

    npm i dash-platform-user

### Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

-   [DashPlatformUser](#dashplatformuser)
    -   [Properties](#properties)
-   [id](#id)
    -   [Parameters](#parameters)
-   [name](#name)
    -   [Parameters](#parameters-1)
-   [identityId](#identityid)
    -   [Parameters](#parameters-2)
-   [identity](#identity)
    -   [Parameters](#parameters-3)
-   [publicKey](#publickey)
    -   [Parameters](#parameters-4)
-   [privateKey](#privatekey)
    -   [Parameters](#parameters-5)
-   [find](#find)
    -   [Parameters](#parameters-6)
-   [returnTypes](#returntypes)
-   [returnTypes](#returntypes-1)
-   [OBJECT](#object)
-   [JSON](#json)
-   [INSTANCE](#instance)
-   [DashUser#toObj](#dashusertoobj)
    -   [Parameters](#parameters-7)
-   [DashConnection](#dashconnection)
    -   [Properties](#properties-1)
-   [connect](#connect)
-   [disconnect](#disconnect)
-   [network](#network)
    -   [Parameters](#parameters-8)
-   [mnemonic](#mnemonic)
    -   [Parameters](#parameters-9)
-   [apps](#apps)
    -   [Parameters](#parameters-10)
-   [client](#client)
    -   [Parameters](#parameters-11)
-   [DataDocument](#datadocument)
    -   [Properties](#properties-2)
-   [submit](#submit)
    -   [Parameters](#parameters-12)
-   [dataContractId](#datacontractid)
    -   [Parameters](#parameters-13)
-   [id](#id-1)
    -   [Parameters](#parameters-14)
-   [ownerId](#ownerid)
    -   [Parameters](#parameters-15)
-   [data](#data)
    -   [Parameters](#parameters-16)
-   [find](#find-1)
    -   [Parameters](#parameters-17)
-   [waitFor](#waitfor)
    -   [Parameters](#parameters-18)

#### DashPlatformUser

DashPlatformUser class - represents a registered Dash Platform Username

##### Properties

-   `id` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Unique id fopr the user record - the id of the DPNS document which registered the name
-   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The registered username
-   `identityId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** identityId  associated with the username
-   `identity` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** full identity object of the identityId
-   `publicKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** private Key Associated wwith the user identity
-   `privateKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** private Key Associated wwith the user identity

#### id

##### Parameters

-   `newId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### name

##### Parameters

-   `newName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### identityId

##### Parameters

-   `newIdentityId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### identity

##### Parameters

-   `newIdentity`  
-   `newIdentityId` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### publicKey

##### Parameters

-   `newPublicKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### privateKey

##### Parameters

-   `newPrivateKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### find

Finds the registered username on the network

##### Parameters

-   `nameToFind` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;({string} | {Object})>)** Either:
    For a single user query,either-   a single string containing a username, or
    -   an single object with properties of `name` and `options` to apply to the query for that user
        OR For a multiple user query
    -   an array with a combination of the above
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional dashjs client. If the object is not passed it will be constructed by the function.

#### returnTypes

Enum for returnType

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

#### returnTypes

Enum for returnType

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

#### OBJECT

return as a plain object

#### JSON

return as a json string

#### INSTANCE

return as an instance of DashPlatformUser class (exposes internal private properties)

#### DashUser#toObj

Casts the DashPlatformUser instance to JSON string format ////

##### Parameters

-   `instance` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** An instance of DashPlatformUser

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### DashConnection

DashConnection class - represents a connection to Dash Platform

##### Properties

-   `network` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Network to connect to i.e. 'testet' (default), mainnet
-   `mnemonic` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Account mnemonic  to use for the connection
-   `apps` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** named app identities
-   `seeds` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** additonal options, overrides other paramaters
-   `client` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** the connection instance client

#### connect

Intialises connection

#### disconnect

Closes and disconnect the connection

#### network

##### Parameters

-   `newNetwork`  
-   `newName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### mnemonic

##### Parameters

-   `newMnemonic` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### apps

##### Parameters

-   `newApps` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### client

##### Parameters

-   `newClient` **any** 

#### DataDocument

DataDocument class - represents data docuemnts sumitted to or retrieved from Dash Platform

##### Properties

-   `dataContractId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** dataContractId the document is validated against
-   `ownerId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** identityId of the owner / submitter of the document
-   `data` **[JSON](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON)** actual data of the document represented as JSON
-   `signature` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the signature on the document

#### submit

submits the document instance using the passed in connection

##### Parameters

-   `connection`  A DashJS client containing the account and keys for signing the doc

#### dataContractId

##### Parameters

-   `newContractId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

#### id

##### Parameters

-   `newId` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### ownerId

##### Parameters

-   `newOwnerId` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### data

##### Parameters

-   `newData` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

#### find

finds one of more documents based on suplied query params

##### Parameters

-   `client` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** A DashJS client, with options set for the locator of the docs to be retrieved
-   `locator` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The document name
-   `query` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object containing array of query parameters

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of found docuemnts

#### waitFor

Calls find() over specified period at specifed frequency until result tis returned

##### Parameters

-   `connection` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** A DashJS connection, with options set for the locator of the docs to be retrieved
-   `locator` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The document name
-   `query` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object containing array of query parameters
-   `timeout` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of millseconds until rejecting as timed out
-   `frequency` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Frequency of calls to find() in millisenconds

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)>** promise for JSON Object 
{success:true, data:array of found docuemnts} if resolved {error: true, message:[error message]} if rejected

### License

[MIT License](LICENSE)

# Development

To develop this library:

-   clone the repository and change to project directory 


    git clone  https://github.com/dashmachine/dash-platform-user.git && cd dash-platform-usere

The source file is `src/dash-platform-user.js`

-   build output


    npm run build

-   test with webpack dev server


    npm start

-   update documentation (requires npm documentation package installed globally:  `npm i -g documentation`)

Update the Documentation section of the README.md file  

    npm run docs:readme
